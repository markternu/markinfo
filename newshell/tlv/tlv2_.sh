function read_and_remove_fixed_bytes() {
    local file_path="$1"
    
    # ========================================================================
    # å‚æ•°æ£€æŸ¥
    # ========================================================================
    if [ -z "$file_path" ]; then
        echo "âŒ é”™è¯¯: æ–‡ä»¶è·¯å¾„ä¸èƒ½ä¸ºç©º" >&2
        echo "ç”¨æ³•: read_and_remove_fixed_bytes <æ–‡ä»¶è·¯å¾„>" >&2
        return 1
    fi
    
    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if [ ! -f "$file_path" ]; then
        echo "âŒ é”™è¯¯: æ–‡ä»¶ '$file_path' ä¸å­˜åœ¨" >&2
        return 1
    fi
    
    # è·å–æ–‡ä»¶å¤§å°
    local file_size=$(wc -c < "$file_path")
    
    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦è‡³å°‘æœ‰104å­—èŠ‚ï¼ˆType + Lengthçš„æœ€å°å¤§å°ï¼‰
    if [ $file_size -lt 104 ]; then
        echo "âŒ é”™è¯¯: æ–‡ä»¶å¤§å°ä¸è¶³104å­—èŠ‚ (å½“å‰: $file_size å­—èŠ‚)" >&2
        echo "   TLV æœ€å°ç»“æ„éœ€è¦: Type(100B) + Length(4B) = 104å­—èŠ‚" >&2
        return 1
    fi
    
    echo "ğŸ” å¼€å§‹è¯»å–å¹¶ç§»é™¤æ–‡ä»¶æœ«å°¾ TLV æ•°æ®: '$file_path'" >&2
    echo "" >&2
    
    # ========================================================================
    # ç¬¬ä¸€æ­¥ï¼šè¯»å– Length å­—æ®µï¼ˆè·å–æ–‡ä»¶åé•¿åº¦ï¼‰
    # ========================================================================
    echo "ğŸ“– [æ­¥éª¤1/4] è¯»å– Length å­—æ®µ..." >&2
    
    # ç›´æ¥ä»æ–‡ä»¶è¯»å–æœ«å°¾4å­—èŠ‚ä½œä¸º Length å­—æ®µ
    # ä½¿ç”¨ xxd å°†äºŒè¿›åˆ¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
    local length_hex=$(tail -c 4 "$file_path" | xxd -p)
    
    # å°†åå…­è¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶
    local name_length=$((16#$length_hex))
    
    echo "   æ–‡ä»¶åé•¿åº¦: $name_length å­—èŠ‚" >&2
    
    # é•¿åº¦åˆç†æ€§æ£€æŸ¥
    if [ $name_length -lt 0 ]; then
        echo "âŒ é”™è¯¯: é•¿åº¦å­—æ®µä¸ºè´Ÿæ•° ($name_length)ï¼Œæ•°æ®æŸå" >&2
        return 1
    fi
    
    if [ $name_length -gt $((file_size - 104)) ]; then
        echo "âŒ é”™è¯¯: é•¿åº¦å­—æ®µå¼‚å¸¸ ($name_length å­—èŠ‚)ï¼Œè¶…è¿‡æ–‡ä»¶å‰©ä½™å¤§å°" >&2
        echo "   æ–‡ä»¶å¤§å°: $file_size å­—èŠ‚" >&2
        echo "   Type+Length: 104 å­—èŠ‚" >&2
        echo "   å‰©ä½™ç©ºé—´: $((file_size - 104)) å­—èŠ‚" >&2
        return 1
    fi
    
    echo "   âœ… é•¿åº¦å­—æ®µè¯»å–æˆåŠŸ" >&2
    
    # ========================================================================
    # ç¬¬äºŒæ­¥ï¼šè¯»å– Type å­—æ®µï¼ˆæ ‡å¿—ä½éªŒè¯ï¼‰
    # ========================================================================
    echo "ğŸ“– [æ­¥éª¤2/4] è¯»å–å¹¶éªŒè¯ Type å­—æ®µ..." >&2
    
    # è®¡ç®—å®Œæ•´TLVå—çš„å¤§å°ï¼ˆéœ€è¦å…ˆæœ‰ name_lengthï¼‰
    local total_tlv_size=$((100 + 4 + name_length))
    
    # ä»æ–‡ä»¶æœ«å°¾è¯»å–å®Œæ•´TLVå—ï¼Œç„¶åæå–å‰100å­—èŠ‚ä½œä¸º Type å­—æ®µ
    local mark=$(tail -c $total_tlv_size "$file_path" | head -c 100 | tr -d '\0')
    
    echo "   æ£€æµ‹åˆ°çš„æ ‡å¿—ä½: '$mark'" >&2
    echo "   æœŸæœ›çš„æ ‡å¿—ä½: 'FKY996'" >&2
    
    # éªŒè¯æ ‡å¿—ä½
    if [ "$mark" != "FKY996" ]; then
        echo "   âŒ æ ‡å¿—ä½ä¸åŒ¹é…" >&2
        echo "" >&2
        echo "âŒ é”™è¯¯: æ–‡ä»¶éé€šè¿‡æœ¬è„šæœ¬è¿½åŠ å†™å…¥ç”Ÿæˆçš„æ–‡ä»¶" >&2
        echo "   æ— æ³•é€šè¿‡æœ¬åŠŸèƒ½è¯»å–å¹¶åˆ‡é™¤æ–‡ä»¶æœ«å°¾æ•°æ®" >&2
        return 1
    fi
    
    echo "   âœ… æ ‡å¿—ä½éªŒè¯é€šè¿‡" >&2
    
    # ========================================================================
    # ç¬¬ä¸‰æ­¥ï¼šè¯»å– Value å­—æ®µï¼ˆæ–‡ä»¶åå†…å®¹ï¼‰
    # ========================================================================
    echo "ğŸ“– [æ­¥éª¤3/4] è¯»å– Value å­—æ®µ ($name_length å­—èŠ‚)..." >&2
    
    echo "   TLV æ€»å¤§å°: $total_tlv_size å­—èŠ‚" >&2
    echo "   â”œâ”€ Type:   100 å­—èŠ‚" >&2
    echo "   â”œâ”€ Length: 4 å­—èŠ‚" >&2
    echo "   â””â”€ Value:  $name_length å­—èŠ‚" >&2
    
    # ç›´æ¥ä»æ–‡ä»¶è¯»å– Value å­—æ®µ
    # æ–¹æ³•ï¼šè¯»å–æœ«å°¾ total_tlv_size å­—èŠ‚ï¼Œç„¶åè·³è¿‡å‰104å­—èŠ‚
    local content_string=$(tail -c $total_tlv_size "$file_path" | dd bs=1 skip=104 2>/dev/null)
    
    echo "   âœ… æ–‡ä»¶åè¯»å–æˆåŠŸ" >&2
    
    # ========================================================================
    # ç¬¬å››æ­¥ï¼šåˆ é™¤TLVæ•°æ®ï¼ˆæˆªæ–­æ–‡ä»¶ï¼‰
    # ========================================================================
    echo "ğŸ—‘ï¸  [æ­¥éª¤4/4] ç§»é™¤ TLV æ•°æ®..." >&2
    
    # è®¡ç®—æ–°æ–‡ä»¶å¤§å°ï¼ˆç§»é™¤æœ«å°¾TLVæ•°æ®ï¼‰
    local new_size=$((file_size - total_tlv_size))
    
    echo "   æ–‡ä»¶å¤§å°å˜åŒ–:" >&2
    echo "   â”œâ”€ åŸå§‹å¤§å°: $file_size å­—èŠ‚" >&2
    echo "   â”œâ”€ ç§»é™¤æ•°æ®: $total_tlv_size å­—èŠ‚" >&2
    echo "   â””â”€ æ–°å¤§å°:   $new_size å­—èŠ‚" >&2
    
    # æ£€æŸ¥æ–°å¤§å°æ˜¯å¦åˆç†
    if [ $new_size -lt 0 ]; then
        echo "âŒ é”™è¯¯: è®¡ç®—å‡ºçš„æ–°æ–‡ä»¶å¤§å°ä¸ºè´Ÿæ•°ï¼Œæ•°æ®å¼‚å¸¸" >&2
        return 1
    fi
    
    # åˆ›å»ºä¸´æ—¶æ–‡ä»¶
    local new_temp_file=$(mktemp)
    
    if [ -z "$new_temp_file" ] || [ ! -f "$new_temp_file" ]; then
        echo "âŒ é”™è¯¯: æ— æ³•åˆ›å»ºä¸´æ—¶æ–‡ä»¶" >&2
        return 1
    fi
    
    # å°†åŸæ–‡ä»¶é™¤äº†æœ«å°¾TLVæ•°æ®çš„éƒ¨åˆ†å¤åˆ¶åˆ°ä¸´æ—¶æ–‡ä»¶
    # head -c $new_size è¯»å–å‰ new_size å­—èŠ‚
    if ! head -c $new_size "$file_path" > "$new_temp_file"; then
        echo "âŒ é”™è¯¯: å¤åˆ¶æ–‡ä»¶å†…å®¹å¤±è´¥" >&2
        rm -f "$new_temp_file"
        return 1
    fi
    
    # ç”¨ä¸´æ—¶æ–‡ä»¶æ›¿æ¢åŸæ–‡ä»¶
    if ! mv "$new_temp_file" "$file_path"; then
        echo "âŒ é”™è¯¯: æ›¿æ¢æ–‡ä»¶å¤±è´¥" >&2
        rm -f "$new_temp_file"
        return 1
    fi
    
    echo "   âœ… TLV æ•°æ®å·²æˆåŠŸç§»é™¤" >&2
    
    # ========================================================================
    # å®Œæˆè¾“å‡º
    # ========================================================================
    echo "" >&2
    echo "ğŸ‰ TLV æ•°æ®è¯»å–å¹¶ç§»é™¤å®Œæˆ!" >&2
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" >&2
    echo "ğŸ“Š å¤„ç†ç»“æœ:" >&2
    echo "   â”œâ”€ æ ‡å¿—ä½éªŒè¯: '$mark' âœ…" >&2
    echo "   â”œâ”€ è¯»å–æ–‡ä»¶å: '$content_string'" >&2
    echo "   â”œâ”€ ç§»é™¤å­—èŠ‚æ•°: $total_tlv_size å­—èŠ‚" >&2
    echo "   â”œâ”€ æ–‡ä»¶æ–°å¤§å°: $(wc -c < "$file_path") å­—èŠ‚" >&2
    echo "   â””â”€ æ•°æ®ç»“æ„:   Type(100B) + Length(4B) + Value(${name_length}B)" >&2
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" >&2
    echo "" >&2
    
    # å°†è¯»å–åˆ°çš„æ–‡ä»¶åå†…å®¹è¾“å‡ºåˆ° stdoutï¼ˆä¾›è°ƒç”¨è€…è·å–ï¼‰
    echo "$content_string"
    return 0
}
