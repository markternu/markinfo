function batch_view_original_names() {
    local file_path_list_string="$1"
    
    # æ£€æŸ¥å‚æ•°
    if [ -z "$file_path_list_string" ]; then
        echo "âŒ é”™è¯¯: æ–‡ä»¶è·¯å¾„åˆ—è¡¨ä¸èƒ½ä¸ºç©º"
        echo "ç”¨æ³•: batch_view_original_names <æ–‡ä»¶è·¯å¾„åˆ—è¡¨>"
        echo "ç¤ºä¾‹: batch_view_original_names \"/Users/cc/Desktop/test/oppp/v{1..40}\" æˆ– batch_view_original_names \"/v30\""
        return 1
    fi
    
    echo "ğŸ‘ï¸  å¼€å§‹æ‰¹é‡æŸ¥çœ‹åŸå§‹æ–‡ä»¶åï¼Œå¤„ç†æ–‡ä»¶å¤¹åˆ—è¡¨: $file_path_list_string"
    echo "ğŸ“– æ“ä½œ: è¯»å–æ–‡ä»¶æœ«å°¾TLVæ•°æ®è·å–åŸå§‹æ–‡ä»¶åï¼ˆä¸åˆ é™¤æ•°æ®ï¼‰"
    echo ""
    
    # å±•å¼€è·¯å¾„åˆ—è¡¨ (å¤„ç† {1..40} è¿™æ ·çš„bashæ‰©å±•)
    local path_array
    # ä¸´æ—¶å¯ç”¨bashçš„å¤§æ‹¬å·å±•å¼€ï¼Œç„¶åå®‰å…¨åœ°å±•å¼€è·¯å¾„
    set +f  # å¯ç”¨æ–‡ä»¶åå±•å¼€
    eval "path_array=($file_path_list_string)"
    set -f  # é‡æ–°ç¦ç”¨æ–‡ä»¶åå±•å¼€ä»¥é¿å…æ„å¤–å±•å¼€
    
    # å¦‚æœå±•å¼€å¤±è´¥æˆ–è€…åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸”åŒ…å«å¤§æ‹¬å·ï¼Œå°è¯•æ‰‹åŠ¨å¤„ç†
    if [ ${#path_array[@]} -eq 1 ] && [[ "${path_array[0]}" == *"{"* ]]; then
        echo "ğŸ”§ æ£€æµ‹åˆ°å¤§æ‹¬å·è¯­æ³•ï¼Œæ‰‹åŠ¨å±•å¼€è·¯å¾„..."
        local original_path="${path_array[0]}"
        
        # æ£€æŸ¥æ˜¯å¦åŒ…å« {æ•°å­—..æ•°å­—} æ¨¡å¼
        if [[ "$original_path" =~ \{([0-9]+)\.\.([0-9]+)\} ]]; then
            local start_num="${BASH_REMATCH[1]}"
            local end_num="${BASH_REMATCH[2]}"
            local base_path="${original_path%\{*\}*}"  # è·å–å¤§æ‹¬å·å‰çš„éƒ¨åˆ†
            local suffix_path="${original_path#*\}}"   # è·å–å¤§æ‹¬å·åçš„éƒ¨åˆ†
            
            # é‡æ–°æ„å»ºè·¯å¾„æ•°ç»„
            path_array=()
            for ((i=start_num; i<=end_num; i++)); do
                path_array+=("${base_path}${i}${suffix_path}")
            done
            
            echo "   âœ… æˆåŠŸå±•å¼€ä¸º ${#path_array[@]} ä¸ªè·¯å¾„ (${base_path}${start_num}${suffix_path} åˆ° ${base_path}${end_num}${suffix_path})"
        fi
    fi
    
    local processed_count=0
    local success_count=0
    local error_count=0
    
    # éå†æ¯ä¸ªè·¯å¾„
    for path in "${path_array[@]}"; do
        echo "ğŸ“ å¤„ç†æ–‡ä»¶å¤¹: $path"
        
        # æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
        if [ ! -d "$path" ]; then
            echo "   âš ï¸  è­¦å‘Š: æ–‡ä»¶å¤¹ '$path' ä¸å­˜åœ¨ï¼Œè·³è¿‡"
            echo ""
            continue
        fi
        
        # æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦ä¸ºç©º
        local file_count=$(find "$path" -maxdepth 1 -type f 2>/dev/null | wc -l)
        if [ "$file_count" -eq 0 ]; then
            echo "   ğŸ“ æ–‡ä»¶å¤¹ä¸ºç©ºï¼Œè·³è¿‡"
            echo ""
            continue
        fi
        
        # å¤„ç†æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
        echo "   ğŸ‘ï¸  å¼€å§‹æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶åŸå§‹åç§°"
        local files_success=0
        local files_failed=0
        
        # ä½¿ç”¨while readå¾ªç¯å®‰å…¨å¤„ç†åŒ…å«ç©ºæ ¼çš„æ–‡ä»¶å
        while IFS= read -r -d '' file_path; do
            local current_filename=$(basename "$file_path")
            
            # è°ƒè¯•ä¿¡æ¯ï¼šæ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„æ–‡ä»¶
            echo "     ğŸ” æŸ¥çœ‹æ–‡ä»¶: '$current_filename'"
            
            # è°ƒç”¨view_original_nameså‡½æ•°æŸ¥çœ‹åŸå§‹æ–‡ä»¶å
            local original_name_string
            local error_temp_file=$(mktemp)
            original_name_string=$(view_original_names "$file_path" 2>"$error_temp_file")
            local view_result=$?
            
            if [ $view_result -eq 0 ] && [ -n "$original_name_string" ]; then
                ((files_success++))
                echo "     âœ… å½“å‰æ–‡ä»¶å: '$current_filename'"
                echo "     ğŸ“ åŸå§‹æ–‡ä»¶å: '$original_name_string'"
                echo "     â¡ï¸  æ˜ å°„å…³ç³»: '$original_name_string' -> '$current_filename'"
            else
                ((files_failed++))
                echo "     âŒ è¯»å–åŸå§‹æ–‡ä»¶åå¤±è´¥: '$current_filename'"
                # æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
                if [ -s "$error_temp_file" ]; then
                    echo "       è¯¦ç»†é”™è¯¯ä¿¡æ¯:"
                    sed 's/^/          /' "$error_temp_file"
                fi
            fi
            
            # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
            rm -f "$error_temp_file"
            echo ""
            
        done < <(find "$path" -maxdepth 1 -type f -print0 2>/dev/null)
        
        echo "   ğŸ“Š æ–‡ä»¶å¤¹å¤„ç†å®Œæˆ - æˆåŠŸæŸ¥çœ‹: $files_success ä¸ªæ–‡ä»¶, å¤±è´¥: $files_failed ä¸ªæ–‡ä»¶"
        ((processed_count++))
        ((success_count += files_success))
        ((error_count += files_failed))
        echo ""
    done
    
    echo "ğŸ‰ æ‰¹é‡æŸ¥çœ‹å®Œæˆ!"
    echo "ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:"
    echo "   - æ€»æ–‡ä»¶å¤¹æ•°: ${#path_array[@]}"
    echo "   - å·²å¤„ç†æ–‡ä»¶å¤¹: $processed_count"
    echo "   - æˆåŠŸæŸ¥çœ‹æ–‡ä»¶: $success_count"
    echo "   - å¤±è´¥æ–‡ä»¶: $error_count"
    echo ""
}

